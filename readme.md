# Система уведомлений

---

## Способ запуска

1. Клонировать репозиторий  
2. Создать файл `.env` в соответствии с образцом из `.env-example`  
3. Запустить Docker командой:  
   ```bash
   docker compose up
   ```
5. Для просмотра доступных API перейти по адресу:  
[http://127.0.0.1:8000/](http://127.0.0.1:8000/api/)

---

## Заполнение файла .env
| Переменная                 | Описание                                                         |
|----------------------------|------------------------------------------------------------------|
| `SECRET_KEY`               | Секретный ключ Django                                            |
| `DB_NAME`                  | Имя базы данных                                                  |
| `DB_USER`                  | Имя пользователя базы данных                                     |
| `DB_PASSWORD`              | Пароль пользователя от базы данных                               |
| `DB_HOST`                  | Хост, на котором находится база данных                           |
| `DB_PORT`                  | Порт базы данных                                                 |
| `EMAIL_HOST_USER`          | Email, от имени которого будет отправляться почта               |
| `EMAIL_HOST_PASSWORD`      | Пароль от почтового аккаунта                                     |
| `EMAIL_HOST`               | SMTP-сервер почтового сервиса                                    |
| `SMSAERO_EMAIL`            | Email от сервиса SMS Aero                                        |
| `SMSAERO_API_KEY`          | API-ключ для авторизации в SMS Aero                              |
| `TELEGRAM_BOT_TOKEN`       | Токен от Telegram-бота                                           |
| `NOTIFY_EMAIL_ENABLED`     | Включен ли канал Email для уведомлений (True/False)              |
| `NOTIFY_EMAIL_PRIORITY`    | Приоритет канала Email (число, меньше = выше приоритет)          |
| `NOTIFY_SMS_ENABLED`       | Включен ли канал SMS для уведомлений (True/False)                |
| `NOTIFY_SMS_PRIORITY`      | Приоритет канала SMS (число, меньше = выше приоритет)            |
| `NOTIFY_TELEGRAM_ENABLED`  | Включен ли канал Telegram для уведомлений (True/False)           |
| `NOTIFY_TELEGRAM_PRIORITY` | Приоритет канала Telegram (число, меньше = выше приоритет)       |



## Функционал

## Создание пользователя

- ViewSet для создания и редактирования пользователя:  
  [http://127.0.0.1:8000/api/user/user/](http://127.0.0.1:8000/api/user/user/)  
- Используется кастомный пользователь для расширения стандартных полей.

### API для логина и получения JWT токенов:

- Получение токена:  
  [http://127.0.0.1:8000/api/token/](http://127.0.0.1:8000/api/token/)  
- Обновление токена:  
  [http://127.0.0.1:8000/api/token/refresh/](http://127.0.0.1:8000/api/token/refresh/)

---

## Отправка и управление Оповещениями

- ViewSet для просмотра списка оповещений и их редактирования:  
  [http://127.0.0.1:8000/api/notification/](http://127.0.0.1:8000/api/notification/)  


### Создание нового Оповещения:

- При создании нового оповещения создаётся задача в celery, которая пытается отправить оповещения в зависимости от приоритета, прописанного в env
---